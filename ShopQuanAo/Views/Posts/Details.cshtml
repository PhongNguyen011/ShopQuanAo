@model ShopQuanAo.Models.Post
@{
    ViewData["Title"] = Model.Title;
    var related = ViewBag.Related as List<ShopQuanAo.Models.Post> ?? new();
    string Img(string? f) => Url.Content(string.IsNullOrEmpty(f)
        ? "~/images/_placeholder.png"
        : $"~/images/posts/{f}");
}

<div class="container my-4">

    <!-- Bài viết chính -->
    <article class="row g-4 align-items-start">
        <!-- Ảnh bên trái -->
        <div class="col-md-5">
            @if (!string.IsNullOrEmpty(Model.Thumbnail))
            {
                <img src="@Img(Model.Thumbnail)"
                     alt="@Model.Title"
                     class="img-fluid rounded"
                     style="width:100%;height:250px;object-fit:cover;border-radius:8px;" />
            }
        </div>

        <!-- Nội dung bên phải -->
        <div class="col-md-7">
            <h3 class="mb-2">@Model.Title</h3>
            <div class="text-muted small mb-3">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm")</div>
            <div class="post-content">
                @Html.Raw(Model.Content)
            </div>
        </div>
    </article>

    <!-- Khoảng cách -->
    <hr class="my-4" />

    <!-- Bài viết khác -->
    <h5 class="mb-3">Bài viết khác</h5>
    <div class="row g-3">
        @foreach (var p in related)
        {
            <div class="col-md-6 col-lg-3">
                <div class="card h-100 shadow-sm">
                    <a asp-controller="Posts" asp-action="Details" asp-route-slug="@p.Slug">
                        <img src="@Img(p.Thumbnail)" class="card-img-top"
                             style="height:250px;object-fit:cover;" alt="@p.Title" />
                    </a>
                    <div class="card-body p-2">
                        <h6 class="card-title text-truncate">@p.Title</h6>
                        <a asp-controller="Posts" asp-action="Details" asp-route-slug="@p.Slug"
                           class="stretched-link"></a>
                    </div>
                </div>
            </div>
        }
    </div>

</div>
